"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.w3cJsonParser = void 0;
const json5_1 = require("json5");
/**
 * @description Parses a valid [json5](https://json5.org) file and replaces `$value` with `value` and `$description` with `comment` to make a w3c standard file compatible with style dictionary
 * @pattern supported file extensions `.json` or `.json5`
 */
exports.w3cJsonParser = {
    pattern: /\.json5?$/,
    parse: ({ filePath, contents }) => {
        // replace $value with value so that style dictionary recognizes it
        try {
            contents = contents
                .replace(/["|']?\$value["|']?:/g, '"value":')
                // convert $description to comment
                .replace(/["|']?\$?description["|']?:/g, '"comment":')
                .replace(/["|']?\$?type["|']?:/g, '"$type":')
                .replace(/["|']?\$?extensions["|']?:/g, '"$extensions":');
            //
            return (0, json5_1.parse)(contents);
        }
        catch (e) {
            throw new Error(`Invalid json5 file "${filePath}".`);
        }
    },
};
