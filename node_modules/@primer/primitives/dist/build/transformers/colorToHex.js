"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.colorToHex = void 0;
const color2k_1 = require("color2k");
const filters_1 = require("../filters");
const getTokenValue_1 = require("./utilities/getTokenValue");
const alpha_1 = require("./utilities/alpha");
/**
 * @description converts color tokens value to `hex6` or `hex8`
 * @type value transformer â€” [StyleDictionary.ValueTransform](https://github.com/amzn/style-dictionary/blob/main/types/Transform.d.ts)
 * @matcher matches all tokens of $type `color`
 * @transformer returns a `hex` string
 */
exports.colorToHex = {
    type: `value`,
    transitive: true,
    matcher: filters_1.isColor,
    transformer: (token) => {
        var _a, _b;
        const alphaValue = (_a = token.alpha) !== null && _a !== void 0 ? _a : (_b = token.$extensions) === null || _b === void 0 ? void 0 : _b.alpha;
        if (alphaValue === null || alphaValue === undefined) {
            return (0, color2k_1.toHex)((0, getTokenValue_1.getTokenValue)(token));
        }
        return (0, color2k_1.toHex)((0, alpha_1.alpha)((0, getTokenValue_1.getTokenValue)(token), alphaValue, token));
    },
};
