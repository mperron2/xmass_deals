"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.colorToHexMix = void 0;
const color2k_1 = require("color2k");
const filters_1 = require("../filters");
const getTokenValue_1 = require("./utilities/getTokenValue");
const mix_1 = __importDefault(require("./utilities/mix"));
/**
 * @description replaces tokens value with `hex8` color using the tokens `alpha` property to specify the value used for alpha
 * @type value transformer â€” [StyleDictionary.ValueTransform](https://github.com/amzn/style-dictionary/blob/main/types/Transform.d.ts)
 * @matcher matches all tokens of $type `color` with an `alpha` property
 * @transformer returns `hex8` string
 */
exports.colorToHexMix = {
    type: `value`,
    transitive: true,
    matcher: filters_1.isColorWithMix,
    transformer: (token) => {
        var _a, _b;
        return (0, color2k_1.toHex)((0, mix_1.default)((0, getTokenValue_1.getTokenValue)(token), ((_a = token.mix) === null || _a === void 0 ? void 0 : _a.color) || (0, getTokenValue_1.getTokenValue)(token), ((_b = token.mix) === null || _b === void 0 ? void 0 : _b.weight) || 0));
    },
};
