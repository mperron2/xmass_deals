"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.javascriptEsm = void 0;
const style_dictionary_1 = __importDefault(require("style-dictionary"));
const sync_1 = __importDefault(require("@prettier/sync"));
const jsonToNestedValue_1 = require("./utilities/jsonToNestedValue");
const prefixTokens_1 = require("./utilities/prefixTokens");
const { fileHeader } = style_dictionary_1.default.formatHelpers;
/**
 * @description Converts `StyleDictionary.dictionary.tokens` to javascript esm (javascript export statement)
 * @param arguments [FormatterArguments](https://github.com/amzn/style-dictionary/blob/main/types/Format.d.ts)
 * @returns formatted `string`
 */
const javascriptEsm = ({ dictionary, file, platform }) => {
    // add prefix if defined
    const tokens = (0, prefixTokens_1.prefixTokens)(dictionary.tokens, platform);
    // add file header and convert output
    const output = `${fileHeader({ file })}export default \n${JSON.stringify((0, jsonToNestedValue_1.jsonToNestedValue)(tokens), null, 2)}\n`;
    // return prettified
    return sync_1.default.format(output, { parser: 'typescript', printWidth: 500 });
};
exports.javascriptEsm = javascriptEsm;
